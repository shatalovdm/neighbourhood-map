"use strict";function getMapData(){var e=[{featureType:"all",elementType:"geometry.fill",stylers:[{weight:"2.00"}]},{featureType:"all",elementType:"geometry.stroke",stylers:[{color:"#9c9c9c"}]},{featureType:"all",elementType:"labels.text",stylers:[{visibility:"on"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"landscape",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#eeeeee"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#7b7b7b"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#46bcec"},{visibility:"on"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#c8d7d4"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#070707"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"}]}];geocoder=new google.maps.Geocoder;var t=restaurantsViewModel.zipSearch();geocoder.geocode({address:t+"+usa"},function(t,r){r==google.maps.GeocoderStatus.OK?(map=new google.maps.Map(document.getElementById("map"),{center:t[0].geometry.location,styles:e,scrollwheel:!1,zoom:15}),getOpenTableData()):alert("Geocode was not successful for the following reason: "+r)})}function populateMap(e){var t,r,l,a=new google.maps.InfoWindow,s=new google.maps.LatLngBounds;if(markers&&removeMarkers(),isHighlighted=!1,e.length>0){for(var o=0;o<e.length;o++){r=e[o],t={lat:r.lat,lng:r.lng};var i=new google.maps.Marker({position:t,map:map,title:r.name,id:r.id});markers.push(i),i.addListener("click",function(){isHighlighted&&revertMarker(l),highlightMarker(this),l=this,isHighlighted=!0,populateInfoWindow(this,r,a)}),s.extend(markers[o].position)}map.panToBounds(s)}}function highlightMarker(e){var t={url:"img/marker.png",origin:new google.maps.Point(0,0),scaledSize:new google.maps.Size(50,50)};e.setIcon(t)}function revertMarker(e){e.setIcon()}function populateInfoWindow(e,t,r){r.marker!=e&&(r.marker=e,r.setContent("<div>"+e.title+"</div><div>"+t.address+'</div><div><a class="btn btn-primary" href="restaurant.link" role="button">Reserve a table</a></div>'),r.open(map,e),r.addListener("closeclick",function(){r.setMarker=null,revertMarker(e)}),google.maps.event.addListener(map,"click",function(t){revertMarker(e),isHighlighted=!1,r.setMarker=null,r.close()}))}function removeMarkers(){for(var e=0;e<markers.length;e++)markers[e].setMap(null);markers.length=0}var map,geocoder,markers=[],isHighlighted=!1,s=document.createElement("script");s.type="text/javascript",s.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA-Xrr0-0B6jLNfz2eOWCUH_Avt4jXvHBs&v=3&callback=getMapData",$("head").append(s);